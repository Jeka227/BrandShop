{{ header }}
<div id="product-product" class="container">
{#   <ul class="breadcrumb">
    {% for breadcrumb in breadcrumbs %}
    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
    {% endfor %}
  </ul> #}
  <div class="row">{{ column_left }}
    {% if column_left and column_right %}
    {% set class = 'col-sm-6' %}
    {% elseif column_left or column_right %}
    {% set class = 'col-sm-9' %}
    {% else %}
    {% set class = 'col-sm-12' %}
    {% endif %}
    <div id="content" class="{{ class }}">{{ content_top }}
      <div class="row"> {% if column_left or column_right %}
        {% set class = 'col-sm-6' %}
        {% else %}
        {% set class = 'col-sm-6' %}
        {% endif %}
        <div class="{{ class }}"> {% if thumb or images %}
          <ul class="thumbnails">
            {% if thumb %}
            <li><a class="thumbnail" href="{{ popup }}" title="{{ heading_title }}"><img src="{{ thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" /></a></li>
            {% endif %}
            {% if images %}
            {% for image in images %}
            <li class="image-additional"><a class="thumbnail" href="{{ image.popup }}" title="{{ heading_title }}"> <img src="{{ image.thumb }}" title="{{ heading_title }}" alt="{{ heading_title }}" /></a></li>
            {% endfor %}
            {% endif %}
          </ul>
          {% endif %}

         <div class="product_descr">
          <svg width="6.000000" height="28.000000" viewBox="0 0 6 28" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
	<rect id="Rectangle 21" rx="3.000000" width="6.000000" height="28.000000" fill="#8A33FD" fill-opacity="1.000000"/>
</svg>
 <span>
            Опис товару
          </span>
           </div>
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab-description" data-toggle="tab">{{ tab_description }}</a></li>
            {% if attribute_groups %}
            <li><a href="#tab-specification" data-toggle="tab">{{ tab_attribute }}</a></li>
            {% endif %}
            {% if review_status1 %}
            <li><a href="#tab-review" data-toggle="tab">{{ tab_review }}</a></li>
            {% endif %}
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="tab-description">{{ description }}</div>
            {% if attribute_groups %}
            <div class="tab-pane" id="tab-specification">
              <div class="bloc_attributes">
             {#  <table class="table table-bordered"> #}
                {% for attribute_group in attribute_groups %}
              {#   <thead> #}
                 {#  <tr>
                    <td colspan="2"><strong>{{ attribute_group.name }}</strong></td>
                  </tr> #}
               {#  </thead>
                <tbody> #}
                {% for attribute in attribute_group.attribute %}

              
    <div class="attribute">
        <span class="att_head">{{ attribute.name }}</span>
        <span class="att_text">{{ attribute.text }}</span>
    </div>


              {#   <tr>
                  <td> {{ attribute.name }} </td> 
                  <td> {{ attribute.text }} </td>
                </tr> #}
                {% endfor %}
                 {#  </tbody> #}
                {% endfor %}
             {#  </table> #}
            </div>
            </div>
            {% endif %}
            {# {% if review_status %} #} {% if review_status1 %}
            <div class="tab-pane" id="tab-review">
              <form class="form-horizontal" id="form-review">
                <div id="review"></div>
                <h2>{{ text_write }}</h2>
                {% if review_guest %}
                <div class="form-group required">
                  <div class="col-sm-12">
                    <label class="control-label" for="input-name">{{ entry_name }}</label>
                    <input type="text" name="name" value="{{ customer_name }}" id="input-name" class="form-control" />
                  </div>
                </div>
                <div class="form-group required">
                  <div class="col-sm-12">
                    <label class="control-label" for="input-review">{{ entry_review }}</label>
                    <textarea name="text" rows="5" id="input-review" class="form-control"></textarea>
                    <div class="help-block">{{ text_note }}</div>
                  </div>
                </div>
                <div class="form-group required">
                  <div class="col-sm-12">
                    <label class="control-label">{{ entry_rating }}</label>
                    &nbsp;&nbsp;&nbsp; {{ entry_bad }}&nbsp;
                    <input type="radio" name="rating" value="1" />
                    &nbsp;
                    <input type="radio" name="rating" value="2" />
                    &nbsp;
                    <input type="radio" name="rating" value="3" />
                    &nbsp;
                    <input type="radio" name="rating" value="4" />
                    &nbsp;
                    <input type="radio" name="rating" value="5" />
                    &nbsp;{{ entry_good }}</div>
                </div>
                {{ captcha }}
                <div class="buttons clearfix">
                  <div class="pull-right">
                    <button type="button" id="button-review" data-loading-text="{{ text_loading }}" class="btn btn-primary">{{ button_continue }}</button>
                  </div>
                </div>
                {% else %}
                {{ text_login }}
                {% endif %}
              </form>
            </div>
            {% endif %}</div>
        </div>
        {% if column_left or column_right %}
        {% set class = 'col-sm-6' %}
        {% else %}
        {% set class = 'col-sm-6' %}
        {% endif %}
        <div class="{{ class }} prod_right">
                  <ul class="breadcrumb_new">
    {% for breadcrumb in breadcrumbs %}
    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a>

    </li>
         {% if not loop.last %}
      <svg width="5" height="12" viewBox="0 0 5 12" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M0.157568 10.9358C-0.0436482 10.7467 -0.0534543 10.4302 0.135666 10.229L3.92592 6.19633C4.02469 6.09124 4.02469 5.90878 3.92592 5.8037L0.135667 1.77102C-0.0534536 1.5698 -0.0436474 1.25337 0.157569 1.06425C0.358786 0.875128 0.675216 0.884934 0.864336 1.08615L4.65459 5.11883C5.11514 5.60883 5.11514 6.39119 4.65459 6.88119L0.864336 10.9139C0.675215 11.1151 0.358785 11.1249 0.157568 10.9358Z" fill="#807D7E"/>
      </svg>
    {% endif %}
       
    {% endfor %}
  </ul>
  
          {# <div class="btn-group">
            <button type="button" data-toggle="tooltip" class="btn btn-default" title="{{ button_wishlist }}" onclick="wishlist.add('{{ product_id }}');"><i class="fa fa-heart"></i></button>
            <button type="button" data-toggle="tooltip" class="btn btn-default" title="{{ button_compare }}" onclick="compare.add('{{ product_id }}');"><i class="fa fa-exchange"></i></button>
          </div> #}
          <h1>{{ heading_title }}</h1>
           {% if review_status %}
          <div class="rating">
            <p>{% for i in 1..5 %}
              {% if rating < i %}
              <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-1x"></i></span>
              {% else %}
              <span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i class="fa fa-star-o fa-stack-1x"></i></span>
              {% endif %}
              {% endfor %} 
              {{ rating }}
             
              {# / <a href="" onclick="$('a[href=\'#tab-review\']').trigger('click'); return false;">{{ text_write }}</a> #}
            </p>
          
            <!-- AddThis Button BEGIN -->
            <div class="addthis_toolbox addthis_default_style" data-url="{{ share }}"><a class="addthis_button_facebook_like" fb:like:layout="button_count"></a> <a class="addthis_button_tweet"></a> <a class="addthis_button_pinterest_pinit"></a> <a class="addthis_counter addthis_pill_style"></a></div>
            <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-515eeaf54693130e"></script> 
            <!-- AddThis Button END --> 
             <div class ="reviews">
         
              <svg width="22.000000" height="19.000000" viewBox="0 0 22 19" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
	<path id="message/Icon" d="M6.5 5.15L14.5 5.15M6.5 9.15L10.5 9.15M17.29 0.15C18.42 0.15 18.98 0.15 19.4 0.37C19.78 0.56 20.09 0.87 20.28 1.24C20.5 1.67 20.5 2.23 20.5 3.35L20.5 10.95C20.5 12.07 20.5 12.63 20.28 13.06C20.09 13.43 19.78 13.74 19.4 13.93C18.98 14.15 18.42 14.15 17.29 14.15L7.51 14.15C7.13 14.15 6.95 14.15 6.76 14.18C6.6 14.21 6.44 14.26 6.3 14.33C6.13 14.41 5.97 14.52 5.66 14.74L1.7 17.54C1.68 17.55 1.67 17.56 1.66 17.56C1.66 17.57 1.65 17.57 1.64 17.58C1.63 17.58 1.62 17.59 1.6 17.6C1.25 17.77 1.07 17.86 0.92 17.84C0.79 17.82 0.66 17.74 0.59 17.63C0.5 17.5 0.5 17.28 0.5 16.86L0.5 3.35C0.5 2.23 0.5 1.67 0.71 1.24C0.9 0.87 1.21 0.56 1.59 0.37C2.01 0.15 2.57 0.15 3.7 0.15L17.29 0.15Z" stroke="#807D7E" stroke-opacity="1.000000" stroke-width="1.500000"/>
</svg>

{{ reviews }} відгуків
  </div>
          </div>
          {% endif %}
         
{#           <ul class="list-unstyled">
            {% if manufacturer %}
            <li>{{ text_manufacturer }} <a href="{{ manufacturers }}">{{ manufacturer }}</a></li>
            {% endif %}
            <li>{{ text_model }} {{ model }}</li>
            {% if reward %}
            <li>{{ text_reward }} {{ reward }}</li>
            {% endif %}
            <li>{{ text_stock }} {{ stock }}</li>
          </ul> #}
          {% if price %}
         {#  <ul class="list-unstyled">
            {% if not special %}
            <li>
              <h2>{{ price }}</h2>
            </li>
            {% else %}
            <li><span style="text-decoration: line-through;">{{ price }}</span></li>
            <li>
              <h2>{{ special }}</h2>
            </li>
            {% endif %}
            {% if tax %}
            <li>{{ text_tax }} {{ tax }}</li>
            {% endif %}
            {% if points %}
            <li>{{ text_points }} {{ points }}</li>
            {% endif %}
            {% if discounts %}
            <li>
              <hr>
            </li>
            {% for discount in discounts %}
            <li>{{ discount.quantity }}{{ text_discount }}{{ discount.price }}</li>
            {% endfor %}
            {% endif %}
          </ul> #}
          {% endif %}
          <div id="product"> {% if options %}
          <input type="hidden" name="product_id" value="{{ product_id }}">
             <input id="buttonCountNumber" name="quantity" value="1"  type="hidden">
        
           {#  <h3>{{ text_option }}</h3> #}
            {% for option in options %}

            {# Додаємо код для виводу красивого селектору по кольорам #}
             <div class="form-group">
            {% if option.status_color_type == '1' %}
              <label class="control-label">{{ option.name }}</label>
                <div id="input-option{{ option.option_id }}"> 
                    {% for option_value in option.product_option_value %}

                    <style>
                    .radio input[type="radio"]:checked + .color-circle.color-circle{{ option_value.product_option_value_id }} {
                        box-shadow: 0 0 0 2px #fff, 0 0 0 3px {{ option_value.color }}; /* Подсветка при выборе */
                    }
                    </style>
                        <div class="radio">
                            <label>
                                <input style="display: none;"type="radio" name="option[{{ option.product_option_id }}]" value="{{ option_value.product_option_value_id }}" data-points="{{ option_value.points_value is defined ? option_value.points_value : 0 }}" data-prefix="{{ option_value.price_prefix }}" data-price="{{ option_value.price_value }}" />
                                <span class="color-circle color-circle{{ option_value.product_option_value_id }}" style="background-color: {{ option_value.color }};"></span>
                               {#  {{ option_value.name }} #}
                               
                            </label>
                        </div>
                    {% endfor %}
                </div>
                </div>


            {% else %}

             {% if option.type == 'radio' %}
              <div class="form-group{% if option.required %} required {% endif %}">
                <label class="control-label">{{ option.name }}</label>
                <div id="input-option{{ option.option_id }}"> 
                {% for option_value in option.product_option_value %}
                  <div class="radio">
                    <label>
                      <input type="radio"  style="display: none;" name="option[{{ option.product_option_id }}]" value="{{ option_value.product_option_value_id }}" data-points="{{ option_value.points_value is defined ? option_value.points_value : 0 }}" data-prefix="{{ option_value.price_prefix }}" data-price="{{ option_value.price_value }}" />
                      {% if option_value.image %} <img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail" /> {% endif %}                  
                     <div style="
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
"> <span>{{ option_value.name }} </span></div>
                     {#  {% if option_value.price %}
                      ({{ option_value.price_prefix }}{{ option_value.price }})
                      {% endif %}  #}</label>
                  </div>
                  {% endfor %} </div>
              </div>
              {% endif %}


              {% if option.type == 'select' %}
              <div class="form-group{% if option.required %} required {% endif %}">
                <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                <select name="option[{{ option.product_option_id }}]" id="input-option{{ option.product_option_id }}" class="form-control">
                  <option value="">{{ text_select }}</option>
                  {% for option_value in option.product_option_value %}
                  <option value="{{ option_value.product_option_value_id }}" data-points="{{ option_value.points_value is defined ? option_value.points_value : 0 }}" data-prefix="{{ option_value.price_prefix }}" data-price="{{ option_value.price_value }}">{{ option_value.name }}
                  {% if option_value.price %}
                  ({{ option_value.price_prefix }}{{ option_value.price }})
                  {% endif %} </option>
                  {% endfor %}
                </select>
              </div>
              {% endif %}

             
              {% if option.type == 'checkbox' %}
              <div class="form-group{% if option.required %} required {% endif %}">
                <label class="control-label">{{ option.name }}</label>
                <div id="input-option{{ option.product_option_id }}"> {% for option_value in option.product_option_value %}
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" name="option[{{ option.product_option_id }}][]" value="{{ option_value.product_option_value_id }}" data-points="{{ option_value.points_value is defined ? option_value.points_value : 0 }}" data-prefix="{{ option_value.price_prefix }}" data-price="{{ option_value.price_value }}" />
                      {% if option_value.image %} <img src="{{ option_value.image }}" alt="{{ option_value.name }} {% if option_value.price %} {{ option_value.price_prefix }} {{ option_value.price }} {% endif %}" class="img-thumbnail" /> {% endif %}
                      {{ option_value.name }}
                      {% if option_value.price %}
                      ({{ option_value.price_prefix }}{{ option_value.price }})
                      {% endif %} </label>
                  </div>
                  {% endfor %} </div>
              </div>
              {% endif %}
              {% if option.type == 'text' %}
              <div class="form-group{% if option.required %} required {% endif %}">
                <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control" />
              </div>
              {% endif %}
              {% if option.type == 'textarea' %}
              <div class="form-group{% if option.required %} required {% endif %}">
                <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                <textarea name="option[{{ option.product_option_id }}]" rows="5" placeholder="{{ option.name }}" id="input-option{{ option.product_option_id }}" class="form-control">{{ option.value }}</textarea>
              </div>
              {% endif %}
              {% if option.type == 'file' %}
              <div class="form-group{% if option.required %} required {% endif %}">
                <label class="control-label">{{ option.name }}</label>
                <button type="button" id="button-upload{{ option.product_option_id }}" data-loading-text="{{ text_loading }}" class="btn btn-default btn-block"><i class="fa fa-upload"></i> {{ button_upload }}</button>
                <input type="hidden" name="option[{{ option.product_option_id }}]" value="" id="input-option{{ option.product_option_id }}" />
              </div>
              {% endif %}
              {% if option.type == 'date' %}
              <div class="form-group{% if option.required %} required {% endif %}">
                <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                <div class="input-group date">
                  <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="YYYY-MM-DD" id="input-option{{ option.product_option_id }}" class="form-control" />
                  <span class="input-group-btn">
                  <button class="btn btn-default" type="button"><i class="fa fa-calendar"></i></button>
                  </span></div>
              </div>
              {% endif %}
              {% if option.type == 'datetime' %}
              <div class="form-group{% if option.required %} required {% endif %}">
                <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                <div class="input-group datetime">
                  <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="YYYY-MM-DD HH:mm" id="input-option{{ option.product_option_id }}" class="form-control" />
                  <span class="input-group-btn">
                  <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                  </span></div>
              </div>
              {% endif %}
              {% if option.type == 'time' %}
              <div class="form-group{% if option.required %} required {% endif %}">
                <label class="control-label" for="input-option{{ option.product_option_id }}">{{ option.name }}</label>
                <div class="input-group time">
                  <input type="text" name="option[{{ option.product_option_id }}]" value="{{ option.value }}" data-date-format="HH:mm" id="input-option{{ option.product_option_id }}" class="form-control" />
                  <span class="input-group-btn">
                  <button type="button" class="btn btn-default"><i class="fa fa-calendar"></i></button>
                  </span></div>
              </div>
              {% endif %}
            {% endif %}
            {% endfor %}
            {% endif %}
            {% if recurrings %}
            <hr>
            <h3>{{ text_payment_recurring }}</h3>
            <div class="form-group required">
              <select name="recurring_id" class="form-control">
                <option value="">{{ text_select }}</option>
                {% for recurring in recurrings %}
                <option value="{{ recurring.recurring_id }}">{{ recurring.name }}</option>
                {% endfor %}
              </select>
              <div class="help-block" id="recurring-description"></div>
            </div>
            {% endif %}
            <div class="form-group" style="
    display: flex;
    gap: 25px;
">
              
              <button type="button" id="button-cart" data-loading-text="{{ text_loading }}" class="btn btn-primary btn-lg btn-block">
                <svg width="16.000000" height="16.000000" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <path id="Icon" d="M0.5 0.33L0.98 0.33C1.8 0.33 2.49 1 2.58 1.89L3.23 8.39C3.32 9.28 4.01 9.95 4.83 9.95L11.78 9.95C12.51 9.95 13.15 9.41 13.34 8.64L14.44 3.9C14.7 2.79 13.94 1.72 12.89 1.72L3.39 1.72M3.71 14.33C3.26 14.33 2.91 13.94 2.91 13.45C2.91 12.97 3.26 12.58 3.71 12.58C4.15 12.58 4.51 12.97 4.51 13.45C4.51 13.94 4.15 14.33 3.71 14.33ZM3.41 13.13L4.01 13.13M3.41 13.78L4.01 13.78M12.55 14.33C12.1 14.33 11.74 13.94 11.74 13.45C11.74 12.97 12.1 12.58 12.55 12.58C12.99 12.58 13.35 12.97 13.35 13.45C13.35 13.94 12.99 14.33 12.55 14.33ZM12.24 13.13L12.85 13.13M12.24 13.78L12.85 13.78" stroke="#FFFFFF" stroke-opacity="1.000000" stroke-width="1.500000"/>
              </svg>
              <span>
              {{ button_cart }}
               </span>
              </button>
              <div class="bloc_price">
                 <span>
                  {% if not special2 %}
                  {{ price2 }}
                  {% else %}
                  {{ special2 }}
                  {% endif %}
                   </span>
              </div>
            </div>
            {% if minimum > 1 %}
            <div class="alert alert-info"><i class="fa fa-info-circle"></i> {{ text_minimum }}</div>
            {% endif %}</div>
            <hr>
            <div class="blocks_info">
    <div class="bloc_info">
        <svg width="44.000000" height="44.000000" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <circle id="Ellipse 6" cx="22.000000" cy="22.000000" r="22.000000" fill="#F6F6F6" fill-opacity="1.000000"/>
            <path id="credit card" d="M27.6 15C28.44 15 28.86 15 29.18 15.2C29.46 15.38 29.69 15.67 29.83 16.02C30 16.42 30 16.94 30 18L30 27C30 28.05 30 28.57 29.83 28.97C29.69 29.32 29.46 29.61 29.18 29.79C28.86 30 28.44 30 27.6 30L17.4 30C16.55 30 16.13 30 15.81 29.79C15.53 29.61 15.3 29.32 15.16 28.97C15 28.57 15 28.05 15 27L15 18C15 16.94 15 16.42 15.16 16.02C15.3 15.67 15.53 15.38 15.81 15.2C16.13 15 16.55 15 17.4 15L27.6 15ZM15 18.75L30 18.75M18 26.25L21 26.25M24 26.25L27 26.25" stroke="#3C4242" stroke-opacity="1.000000" stroke-width="1.100000"/>
        </svg>
        <span>
           Безпечна оплата 
        </span>
    </div>


    <div class="bloc_info">
        <svg width="44.000000" height="44.000000" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <circle id="Ellipse 7" cx="22.000000" cy="22.000000" r="22.000000" fill="#F6F6F6" fill-opacity="1.000000"/>
            <path id="Size &amp; Fit" d="M25.63 30C26.63 30 27.45 29.2 27.45 28.21L27.45 21.57C27.45 21.06 28.08 20.8 28.45 21.16C28.79 21.5 29.37 21.32 29.45 20.85L29.97 17.8C30.09 17.08 29.75 16.36 29.11 15.98L25.8 14.03C25.7 13.97 25.58 13.99 25.51 14.08C23.71 16.29 20.28 16.29 18.48 14.08C18.41 13.99 18.29 13.97 18.19 14.03L14.88 15.98C14.24 16.36 13.9 17.08 14.02 17.8L14.54 20.85C14.62 21.32 15.2 21.5 15.54 21.16C15.91 20.8 16.54 21.06 16.54 21.57L16.54 28.21C16.54 29.2 17.36 30 18.36 30L25.63 30Z" stroke="#3C4242" stroke-opacity="1.000000" stroke-width="1.100000"/>
        </svg>
        <span>
            Підходящі розміри
        </span>        
    </div>
    <div class="bloc_info">
        <svg width="44.000000" height="44.000000" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <circle id="Ellipse 8" cx="22.000000" cy="22.000000" r="22.000000" fill="#F6F6F6" fill-opacity="1.000000"/>
            <path id="truck" d="M14.8 27.13L13.45 27.13C13.2 27.13 13 26.92 13 26.66L13 15.46C13 15.2 13.2 15 13.45 15L23.35 15C23.59 15 23.8 15.2 23.8 15.46L23.8 26.66C23.8 26.92 23.59 27.13 23.35 27.13L18.4 27.13M23.8 26.66L23.8 18.26C23.8 18 24 17.79 24.25 17.79L27.21 17.79C27.33 17.79 27.44 17.84 27.53 17.93L30.86 21.39C30.95 21.48 31 21.6 31 21.72L31 26.66C31 26.92 30.79 27.13 30.55 27.13L29.2 27.13M25.6 27.13L24.25 27.13C24 27.13 23.8 26.92 23.8 26.66M16.6 29C15.6 29 14.8 28.16 14.8 27.13C14.8 26.1 15.6 25.26 16.6 25.26C17.59 25.26 18.4 26.1 18.4 27.13C18.4 28.16 17.59 29 16.6 29ZM27.4 29C26.4 29 25.6 28.16 25.6 27.13C25.6 26.1 26.4 25.26 27.4 25.26C28.39 25.26 29.2 26.1 29.2 27.13C29.2 28.16 28.39 29 27.4 29Z" stroke="#3C4242" stroke-opacity="1.000000" stroke-width="1.100000"/>
        </svg>
        <span>
            Безкоштовна доставка
        </span>        
    </div>
    <div class="bloc_info">

        <svg width="44.000000" height="44.000000" viewBox="0 0 44 44" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <circle id="Ellipse 9" cx="22.000000" cy="22.000000" r="22.000000" fill="#F6F6F6" fill-opacity="1.000000"/>
            <path id="Free Shipping &amp; Returns" d="M16.66 30C15.68 30 14.88 29.2 14.88 28.22C14.88 27.24 15.68 26.44 16.66 26.44C17.64 26.44 18.44 27.24 18.44 28.22C18.44 29.2 17.64 30 16.66 30ZM27.33 17.55C26.35 17.55 25.55 16.75 25.55 15.77C25.55 14.79 26.35 14 27.33 14C28.31 14 29.11 14.79 29.11 15.77C29.11 16.75 28.31 17.55 27.33 17.55ZM25.55 15.77L18.44 15.77C17.46 15.77 16.66 16.57 16.66 17.55L16.66 21.11M18.44 28.22L25.55 28.22C26.53 28.22 27.33 27.42 27.33 26.44L27.33 22.88M30 24.66L27.64 22.13C27.47 21.95 27.19 21.95 27.01 22.13L24.66 24.66M19.33 19.33L16.98 21.86C16.8 22.04 16.52 22.04 16.35 21.86L14 19.33" stroke="#3C4242" stroke-opacity="1.000000" stroke-width="1.100000"/>
        </svg>

        <span>
            Легкий обмін
        </span>
        
    </div>


</div>

         {#  {% if review_status %}
          <div class="rating">
            <p>{% for i in 1..5 %}
              {% if rating < i %}<span class="fa fa-stack"><i class="fa fa-star-o fa-stack-1x"></i></span>{% else %}<span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i class="fa fa-star-o fa-stack-1x"></i></span>{% endif %}
              {% endfor %} <a href="" onclick="$('a[href=\'#tab-review\']').trigger('click'); return false;">{{ reviews }}</a> / <a href="" onclick="$('a[href=\'#tab-review\']').trigger('click'); return false;">{{ text_write }}</a></p>
            <hr>
            <!-- AddThis Button BEGIN -->
            <div class="addthis_toolbox addthis_default_style" data-url="{{ share }}"><a class="addthis_button_facebook_like" fb:like:layout="button_count"></a> <a class="addthis_button_tweet"></a> <a class="addthis_button_pinterest_pinit"></a> <a class="addthis_counter addthis_pill_style"></a></div>
            <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-515eeaf54693130e"></script> 
            <!-- AddThis Button END --> 
          </div>
          {% endif %} #} </div>
      </div>
      {% if products %}
      <h3>{{ text_related }}</h3>
      <div class="row"> {% set i = 0 %}
        {% for product in products %}
        {% if column_left and column_right %}
        {% set class = 'col-xs-8 col-sm-6' %}
        {% elseif column_left or column_right %}
        {% set class = 'col-xs-6 col-md-4' %}
        {% else %}
        {% set class = 'col-xs-6 col-sm-3' %}
        {% endif %}
        <div class="{{ class }}">
          <div class="product-thumb transition">
            <div class="image"><a href="{{ product.href }}"><img src="{{ product.thumb }}" alt="{{ product.name }}" title="{{ product.name }}" class="img-responsive" /></a></div>
            <div class="caption">
              <h4><a href="{{ product.href }}">{{ product.name }}</a></h4>
              <p>{{ product.description }}</p>
              {% if product.rating %}
              <div class="rating"> {% for j in 1..5 %}
                {% if product.rating < j %} <span class="fa fa-stack"><i class="fa fa-star-o fa-stack-1x"></i></span> {% else %} <span class="fa fa-stack"><i class="fa fa-star fa-stack-1x"></i><i class="fa fa-star-o fa-stack-1x"></i></span> {% endif %}
                {% endfor %} </div>
              {% endif %}
              {% if product.price %}
              <p class="price"> {% if not product.special %}
                {{ product.price }}
                {% else %} <span class="price-new">{{ product.special }}</span> <span class="price-old">{{ product.price }}</span> {% endif %}
                {% if product.tax %} <span class="price-tax">{{ text_tax }} {{ product.tax }}</span> {% endif %} </p>
              {% endif %} </div>
            <div class="button-group">
              <button type="button" onclick="cart.add('{{ product.product_id }}', '{{ product.minimum }}');"><span class="hidden-xs hidden-sm hidden-md">{{ button_cart }}</span> <i class="fa fa-shopping-cart"></i></button>
              <button type="button" data-toggle="tooltip" title="{{ button_wishlist }}" onclick="wishlist.add('{{ product.product_id }}');"><i class="fa fa-heart"></i></button>
              <button type="button" data-toggle="tooltip" title="{{ button_compare }}" onclick="compare.add('{{ product.product_id }}');"><i class="fa fa-exchange"></i></button>
            </div>
          </div>
        </div>
        {% if column_left and column_right and (i + 1) % 2 == 0 %}
        <div class="clearfix visible-md visible-sm"></div>
        {% elseif column_left or column_right and (i + 1) % 3 == 0 %}
        <div class="clearfix visible-md"></div>
        {% elseif (i + 1) % 4 == 0 %}
        <div class="clearfix visible-md"></div>
        {% endif %}
        {% set i = i + 1 %}
        {% endfor %} </div>
        {% endif %}
        {% if tags %}
        <p>{{ text_tags }}
        {% for i in 0..tags|length - 1 %}
        {% if i < (tags|length - 1) %} <a href="{{ tags[i].href }}">{{ tags[i].tag }}</a>,
        {% else %} <a href="{{ tags[i].href }}">{{ tags[i].tag }}</a> {% endif %}
        {% endfor %} </p>
        {% endif %}
        
      
      </div>
      {{ content_bottom }}
    {{ column_right }}</div>
</div>
<script type="text/javascript"><!--
$('select[name=\'recurring_id\'], input[name="quantity"]').change(function(){
	$.ajax({
		url: 'index.php?route=product/product/getRecurringDescription',
		type: 'post',
		data: $('input[name=\'product_id\'], input[name=\'quantity\'], select[name=\'recurring_id\']'),
		dataType: 'json',
		beforeSend: function() {
			$('#recurring-description').html('');
		},
		success: function(json) {
			$('.alert-dismissible, .text-danger').remove();

			if (json['success']) {
				$('#recurring-description').html(json['success']);
			}
		}
	});
});
//--></script> 
<script type="text/javascript"><!--
$('#button-cart').on('click', function() {
	$.ajax({
		url: 'index.php?route=checkout/cart/add',
		type: 'post',
		data: $('#product input[type=\'text\'], #product input[type=\'hidden\'], #product input[type=\'radio\']:checked, #product input[type=\'checkbox\']:checked, #product select, #product textarea'),
		dataType: 'json',
		beforeSend: function() {
			$('#button-cart').button('loading');
		},
		complete: function() {
			$('#button-cart').button('reset');
		},
		success: function(json) {
			$('.alert-dismissible, .text-danger').remove();
			$('.form-group').removeClass('has-error');
 console.log(json);
			if (json['error']) {
				if (json['error']['option']) {
					for (i in json['error']['option']) {
						var element = $('#input-option' + i.replace('_', '-'));

						if (element.parent().hasClass('input-group')) {
							element.parent().after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
						} else {
							element.after('<div class="text-danger">' + json['error']['option'][i] + '</div>');
						}
					}
				}

				if (json['error']['recurring']) {
					$('select[name=\'recurring_id\']').after('<div class="text-danger">' + json['error']['recurring'] + '</div>');
				}

				// Highlight any found errors
				$('.text-danger').parent().addClass('has-error');
			}

			if (json['success']) {

        console.log(json['success']);
				$('.breadcrumb_new').after('<div class="alert alert-success alert-dismissible">' + json['success'] + '<button type="button" class="close" data-dismiss="alert">&times;</button></div>');

				$('#cart > button').html('<span id="cart-total"><i class="fa fa-shopping-cart"></i> ' + json['total'] + '</span>');

				$('html, body').animate({ scrollTop: 0 }, 'slow');

				$('#cart > ul').load('index.php?route=common/cart/info ul li');
			}
		},
        error: function(xhr, ajaxOptions, thrownError) {
            alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
        }
	});
});
//--></script> 
<script type="text/javascript"><!--
$('.date').datetimepicker({
	language: '{{ datepicker }}',
	pickTime: false
});

$('.datetime').datetimepicker({
	language: '{{ datepicker }}',
	pickDate: true,
	pickTime: true
});

$('.time').datetimepicker({
	language: '{{ datepicker }}',
	pickDate: false
});

$('button[id^=\'button-upload\']').on('click', function() {
	var node = this;

	$('#form-upload').remove();

	$('body').prepend('<form enctype="multipart/form-data" id="form-upload" style="display: none;"><input type="file" name="file" /></form>');

	$('#form-upload input[name=\'file\']').trigger('click');

	if (typeof timer != 'undefined') {
    	clearInterval(timer);
	}

	timer = setInterval(function() {
		if ($('#form-upload input[name=\'file\']').val() != '') {
			clearInterval(timer);

			$.ajax({
				url: 'index.php?route=tool/upload',
				type: 'post',
				dataType: 'json',
				data: new FormData($('#form-upload')[0]),
				cache: false,
				contentType: false,
				processData: false,
				beforeSend: function() {
					$(node).button('loading');
				},
				complete: function() {
					$(node).button('reset');
				},
				success: function(json) {
					$('.text-danger').remove();

					if (json['error']) {
						$(node).parent().find('input').after('<div class="text-danger">' + json['error'] + '</div>');
					}

					if (json['success']) {
						alert(json['success']);

						$(node).parent().find('input').val(json['code']);
					}
				},
				error: function(xhr, ajaxOptions, thrownError) {
					alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
				}
			});
		}
	}, 500);
});
//--></script> 
<script type="text/javascript"><!--
$('#review').delegate('.pagination a', 'click', function(e) {
    e.preventDefault();

    $('#review').fadeOut('slow');

    $('#review').load(this.href);

    $('#review').fadeIn('slow');
});

$('#review').load('index.php?route=product/product/review&product_id={{ product_id }}');

$('#button-review').on('click', function() {
	$.ajax({
		url: 'index.php?route=product/product/write&product_id={{ product_id }}',
		type: 'post',
		dataType: 'json',
		data: $("#form-review").serialize(),
		beforeSend: function() {
			$('#button-review').button('loading');
		},
		complete: function() {
			$('#button-review').button('reset');
		},
		success: function(json) {
			$('.alert-dismissible').remove();

			if (json['error']) {
				$('#review').after('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> ' + json['error'] + '</div>');
			}

			if (json['success']) {
				$('#review').after('<div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> ' + json['success'] + '</div>');

				$('input[name=\'name\']').val('');
				$('textarea[name=\'text\']').val('');
				$('input[name=\'rating\']:checked').prop('checked', false);
			}
		}
	});
});

$(document).ready(function() {
	$('.thumbnails').magnificPopup({
		type:'image',
		delegate: 'a',
		gallery: {
			enabled: true
		}
	});
});
//--></script> 


<script>
function price_format_autocalc(n)
{ 
    c = {{ currency_autocalc.decimals is empty ? 0 : currency_autocalc.decimals }};
    d = '{{ currency_autocalc.decimal_point }}'; 
    t = '{{ currency_autocalc.thousand_point }}'; 
    s_left = '{{ currency_autocalc.symbol_left }}';
    s_right = '{{ currency_autocalc.symbol_right }}';
     
    n = n * {{ currency_autocalc.value }};
    i = parseInt(n = Math.abs(n).toFixed(c)) + ''; 

    j = ((j = i.length) > 3) ? j % 3 : 0; 
    return s_left + (j ? i.substr(0, j) + t : '') + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : '') + s_right; 
}

function calculate_tax_autocalc(price)
{
    {# Process Tax Rates #}
 {% if (tax_rates is defined and tax) %}
 {% for tax_rate in tax_rates %} 
 {% if (tax_rate.type == 'F') %}
 {{ 'price += '~tax_rate.rate~';' }}
 {% elseif (tax_rate.type == 'P') %}
 {{ 'price += (price * '~tax_rate.rate~') / 100.0;' }}
 {% endif %}
 {% endfor %}
 {% endif %}
 
    return price;
}

function process_discounts_autocalc(price, quantity)
{
     {% for discount in dicounts_unf_autocalc %} 
 {{ 'if ((quantity >= '~discount.quantity~') && ('~discount.price~' < price)) price = '~discount.price~';'~"\n" }}
 {% endfor %}
 
    return price;
}


animate_delay = 10;

main_price_autocalc_final = calculate_tax_autocalc({{ price_value }});
main_price_autocalc_start = calculate_tax_autocalc({{ price_value }});
main_step = 0;
main_timeout_id = 0;

function animateMainPrice_callback() {
    main_price_autocalc_start += main_step;
    
    if ((main_step > 0) && (main_price_autocalc_start > main_price_autocalc_final)){
        main_price_autocalc_start = main_price_autocalc_final;
    } else if ((main_step < 0) && (main_price_autocalc_start < main_price_autocalc_final)) {
        main_price_autocalc_start = main_price_autocalc_final;
    } else if (main_step == 0) {
        main_price_autocalc_start = main_price_autocalc_final;
    }
    
    $('.bloc_price span').html( price_format_autocalc(main_price_autocalc_start) );
    
    if (main_price_autocalc_start != main_price_autocalc_final) {
        main_timeout_id = setTimeout(animateMainPrice_callback, animate_delay);
    }
}

function animateMainPriceAutocalc(price) {
    main_price_autocalc_start = main_price_autocalc_final;
    main_price_autocalc_final = price;
    main_step = (main_price_autocalc_final - main_price_autocalc_start) / 10;
    
    clearTimeout(main_timeout_id);
    main_timeout_id = setTimeout(animateMainPrice_callback, animate_delay);
}


{% if (special) %} 
special_autocalc_price_final = calculate_tax_autocalc({{ special_value }});
special_autocalc_price_start = calculate_tax_autocalc({{ special_value }});
special_autocalc_step = 0;
special_autocalc_timeout_id = 0;

function animateSpecialPrice_autocalc_callback_autocalc() {
    special_autocalc_price_start += special_autocalc_step;
    
    if ((special_autocalc_step > 0) && (special_autocalc_price_start > special_autocalc_price_final)){
        special_autocalc_price_start = special_autocalc_price_final;
    } else if ((special_autocalc_step < 0) && (special_autocalc_price_start < special_autocalc_price_final)) {
        special_autocalc_price_start = special_autocalc_price_final;
    } else if (special_autocalc_step == 0) {
        special_autocalc_price_start = special_autocalc_price_final;
    }
    
    $('.autocalc-product-special').html( price_format_autocalc(special_autocalc_price_start) );
    
    if (special_autocalc_price_start != special_autocalc_price_final) {
        special_autocalc_timeout_id = setTimeout(animateSpecialPrice_autocalc_callback_autocalc, animate_delay);
    }
}

function animateSpecialPrice_autocalc(price) {
    special_autocalc_price_start = special_autocalc_price_final;
    special_autocalc_price_final = price;
    special_autocalc_step = (special_autocalc_price_final - special_autocalc_price_start) / 10;
    
    clearTimeout(special_autocalc_timeout_id);
    special_autocalc_timeout_id = setTimeout(animateSpecialPrice_autocalc_callback_autocalc, animate_delay);
}
{% endif %} 


function recalculateprice_autocalc()
{
    var main_price_autocalc = {{ price_value }};
    var input_quantity = Number($('#product input[name="quantity"]').val());
      console.log('input_quantity '+input_quantity);
    {% if special %} 
		var special_autocalc = {{ special_value }};
	{% else %} 
		var special_autocalc = 0;
	{% endif %} 
    var tax = 0;
    
    if (isNaN(input_quantity)) input_quantity = 0;
    
    {% if special %} 
        special_coefficient = {{ price_value/special_value }};
    {% endif %} 
    main_price_autocalc = process_discounts_autocalc(main_price_autocalc, input_quantity);
    tax = process_discounts_autocalc(tax, input_quantity);
    
    
    var option_price = 0;
    
    {% if points %} 
      var points = {{ points_value }};
      $('input:checked,option:selected').each(function() {
          if ($(this).data('points')) points += Number($(this).data('points'));
      });
      $('.autocalc-product-points').html(points);
    {% endif %} 
    
    $('input:checked,option:selected').each(function() {
      if ($(this).data('prefix') == '=') {
        option_price += Number($(this).data('price'));
        main_price_autocalc = 0;
        special_autocalc = 0;
      }
    });
    
    $('input:checked,option:selected').each(function() {
      if ($(this).data('prefix') == '+') {
        option_price += Number($(this).data('price'));
      }
      if ($(this).data('prefix') == '-') {
        option_price -= Number($(this).data('price'));
      }
      if ($(this).data('prefix') == 'u') {
        pcnt = 1.0 + (Number($(this).data('price')) / 100.0);
        option_price *= pcnt;
        main_price_autocalc *= pcnt;
        special_autocalc *= pcnt;
      }
      if ($(this).data('prefix') == 'd') {
        pcnt = 1.0 - (Number($(this).data('price')) / 100.0);
        option_price *= pcnt;
        main_price_autocalc *= pcnt;
        special_autocalc *= pcnt;
      }
      if ($(this).data('prefix') == '*') {
        option_price *= Number($(this).data('price'));
        main_price_autocalc *= Number($(this).data('price'));
        special_autocalc *= Number($(this).data('price'));
      }
    });
    
    special_autocalc += option_price;
    main_price_autocalc += option_price;

    {% if special %} 
      main_price_autocalc = special_autocalc * special_coefficient;
      tax = special_autocalc;
    {% else %} 
      tax = main_price_autocalc;
    {% endif %} 
    
    // Process TAX.
    main_price_autocalc = calculate_tax_autocalc(main_price_autocalc);
    special_autocalc = calculate_tax_autocalc(special_autocalc);
    
    // Раскомментировать, если нужен вывод цены с умножением на количество
    main_price_autocalc *= input_quantity;
    special_autocalc *= input_quantity;
    tax *= input_quantity;

    // Display Main Price
    console.log('main_price_autocalc '+main_price_autocalc);
    animateMainPriceAutocalc(main_price_autocalc);
      
    {% if special %} 
      animateSpecialPrice_autocalc(special_autocalc);
    {% endif %} 
}

$(document).ready(function() {
    $('#product input[type="checkbox"]').bind('change', function() { recalculateprice_autocalc(); });
    $('#product input[type="radio"]').bind('change', function() { recalculateprice_autocalc(); });
    $('#product select').bind('change', function() { recalculateprice_autocalc(); });
    
    $quantity_autocalc = $('#product input[name="quantity"]');
    $quantity_autocalc.data('val', $quantity_autocalc.val());
    (function() {
        if ($quantity_autocalc.val() != $quantity_autocalc.data('val')){
            $quantity_autocalc.data('val',$quantity_autocalc.val());
            recalculateprice_autocalc();
        }
        setTimeout(arguments.callee, 250);
    })();    
    
    {% if (config_additional_settings_luxshop['price_recalc'] is defined and (config_additional_settings_luxshop['price_recalc'] == '1')) %}
    recalculateprice_autocalc();
	{% endif %}
});
</script>
</div>
{{ footer }} 
